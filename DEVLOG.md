# 護理人員排班系統 開發日誌

## 一、原始專案開發規劃（MVP）

### 1. 產品目標
- 建立一套簡易、可擴充的護理人員排班系統，協助醫療單位有效管理護理人力與班表。

### 2. 主要功能
- **人員管理**：新增、編輯、刪除、查詢護理人員（含病房分組、批次上傳/下載）
- **班別設定**：新增、編輯、刪除、查詢班別（含病房、上班時間、所需人數、批次上傳/下載）
- **自動排班**：一鍵產生排班表（根據規則與人員資料，MVP 先用隨機分配，後續支援進階規則）
- **班表查詢**：依條件查詢班表、支援搜尋、匯出
- **班表分析**：樞紐分析表格，讓使用者自由分析班表內容
- **資料儲存**：SQLite 資料庫

### 3. 技術選型
- 前端：Flask + Bootstrap + PivotTable.js
- 後端：Python
- 資料庫：SQLite
- 匯出：CSV

---

## 二、目前已完成的功能

- 人員管理（CRUD、病房分組、批次上傳/下載）
- 班別設定（CRUD、病房欄位、批次上傳/下載）
- 自動排班（支援進階規則：每日最多一班、連續上班天數、每月班數上下限、公平分配、缺人自動標註）
- 班表查詢（多條件搜尋、查詢結果匯出CSV）
- 班表分析（PivotTable.js 樞紐分析，支援拖曳分析）
- 所有資料皆儲存於 SQLite，資料結構可擴充

---

## 三、下一階段建議執行步驟

### 1. **自動排班進階優化**
   - 支援「月」排班（目前為週）
   - 增加更多排班規則（如排休、夜班限制、特殊人員需求）
   - 排班結果可手動微調

### 2. **權限與帳號管理**
   - 區分主管與一般護理人員權限（主管可編輯，護理人員僅查詢）
   - 登入/登出功能

### 3. **使用者體驗優化**
   - 介面美化、操作流程優化
   - 增加操作提示、錯誤訊息

### 4. **資料備份/還原**
   - 支援資料備份與還原功能

### 5. **進階報表與匯出**
   - 支援匯出 Excel
   - 匯出排班統計報表（如每人班數、每班人力分布）

### 6. **API/雲端化（選擇性）**
   - 提供 API 介面，方便未來串接其他系統
   - 部署到雲端，支援多用戶協作

---

## 四、你可以選擇的下一步

- 進行「月排班」與進階規則設計
- 權限管理與登入功能
- 介面美化與使用者體驗優化
- 進階報表與匯出
- 其他你有興趣或需求的功能

## 2024-06-xx
- 新增「月曆檢視」功能，採用 FullCalendar.js 呈現班表，支援月份切換與班別資訊提示。
- 月曆檢視頁面新增「月份選擇器」，可快速切換不同月份班表。
- 自動排班後，系統自動導向該月份的月曆檢視。
- 班表查詢頁面下方新增「本月班數統計」與警示（低於22班或高於30班以紅色顯示）。
- 介面與操作體驗優化建議：UI美化、操作提示、響應式設計。
- 補充未來建議：權限管理、手動微調、資料備份/還原、API串接、雲端化。

## 2024-05-xx
- MVP功能完成：人員管理、班別設定、班表查詢、班表分析、自動排班（含進階規則）、CSV匯入匯出。
- 支援依病房分組排班、進階排班規則（每日最多一班、連續上班天數、每月班數上下限、公平分配、缺人自動標註）。
- 首頁、班表查詢、班表分析（PivotTable.js）等主要頁面完成。

## 下一步建議
- 進階自動排班（夜班限制、特殊需求、手動微調）
- 權限與帳號管理（主管/一般人員、登入登出）
- 介面美化、操作提示、資料備份/還原、進階報表與匯出、API/雲端化 
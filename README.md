# 護理人員排班系統

## 專案簡介

本系統為醫療單位設計的護理人員排班管理工具，支援人員與班別管理、自動排班、班表查詢、樞紐分析、批次上傳/下載與多條件搜尋，並可依實務需求擴充。

---

## 主要功能
- 人員管理（CRUD、病房分組、批次上傳/下載）
- 班別設定（CRUD、病房欄位、批次上傳/下載）
- 自動排班（支援進階規則：每日最多一班、連續上班天數、每月班數上下限、公平分配、缺人自動標註）
- 班表查詢（多條件搜尋、查詢結果匯出CSV）
- 班表分析（PivotTable.js 樞紐分析，支援拖曳分析）
- 所有資料皆儲存於 SQLite，資料結構可擴充

---

## 安裝與啟動

1. **安裝 Python 3.8+**
2. **安裝必要套件**
   ```bash
   pip install -r requirements.txt
   ```
3. **啟動 Flask 伺服器**
   ```bash
   python app.py
   ```
4. **瀏覽器開啟**
   http://127.0.0.1:5000/

---

## 使用說明

- 進入首頁可選擇「人員管理」、「班別設定」、「自動排班」、「班表查詢」、「班表分析」等功能
- 各功能頁面皆有直覺操作介面，支援批次上傳/下載、查詢、匯出
- 「自動排班」可一鍵產生一週班表，並依規則自動分配
- 「班表分析」可自由拖曳欄位進行樞紐分析

---

## 專案規劃與開發日誌

請參閱 [DEVLOG.md](DEVLOG.md) 取得完整專案規劃、已完成功能與下一階段建議。

---

## 貢獻方式

歡迎 issue、pull request 或 fork 本專案，協助功能優化與錯誤修正。

---

## 聯絡方式

如有合作或技術諮詢需求，請於 GitHub issue 留言。

## 最新功能
- 新增「月曆檢視」：以 FullCalendar.js 呈現班表，支援月份切換、班別資訊提示。
- 月曆檢視頁面有「月份選擇器」，可快速切換不同月份。
- 自動排班後自動導向該月份的月曆檢視。
- 班表查詢頁面下方新增「本月班數統計」與警示（低於22班或高於30班以紅色顯示）。

## 技術棧
- Python Flask
- Bootstrap 5
- FullCalendar.js（行事曆）
- PivotTable.js（樞紐分析）
- SQLite（資料儲存）

## 主要特色
- 人員/班別管理（CRUD、批次上傳/下載）
- 進階自動排班（多規則、依病房分組、缺人自動標註）
- 班表查詢（多條件搜尋、CSV匯出）
- 月曆檢視（FullCalendar，支援月份切換）
- 班表分析（PivotTable.js）
- 本月班數統計與警示

## 下一步建議
- 進階自動排班（夜班限制、特殊需求、手動微調）
- 權限與帳號管理（主管/一般人員、登入登出）
- 介面美化、操作提示、資料備份/還原、進階報表與匯出、API/雲端化

### 近期更新
- 班表分析頁面美化，活力綠主題、標題、說明、匯出CSV按鈕，PivotTable.js 介面現代化。
- 全站主色調改為淺粉紅，首頁及所有子頁面背景、標題、卡片、按鈕皆統一色系。
- 員工橫式排班表優化：日期下方新增星期，早班/小夜班/大夜班以不同底色顯示。
- 各頁按鈕與導覽動線優化：「員工橫式排班表」按鈕移至班表查詢頁「月曆檢視」右側，回首頁/回上一頁按鈕動線更直覺。
- staff頁面「批次上傳」「範本下載」按鈕版面與shift頁一致，並支援點擊自動上傳。
- staff頁面新增「篩選搜尋」功能，可依員工編號、姓名、職稱、病房即時過濾。
- 其他UI一致性優化與細節調整。
- 2025-06-xx 權限管理與使用者管理功能開發進度：
  - 全站登入保護，未登入自動導向登入頁。
  - 依登入者角色（管理員/護理人員）顯示不同功能選單。
  - 首頁右上角顯示登入者名稱與登出按鈕。
  - 管理員專用「使用者管理」頁面：可新增、編輯、刪除、批次上傳/下載使用者。
  - 月曆檢視頁面新增「員工姓名、病房、班別」篩選查詢功能。 